<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Register - RidesJSF</title>
</h:head>
<h:body>
    <div style="width: 500px; margin: 50px auto;">
        <h:form id="registerForm">
            <p:panel header="Create New Account" style="margin-bottom:20px">
                <p:messages id="messages" showDetail="true" closable="true" />
                
                <p:panelGrid columns="2" layout="grid" styleClass="ui-fluid">
                    <p:outputLabel for="email" value="Email:" />
                    <p:inputText id="email" value="#{registerBean.email}" 
                                 required="true" 
                                 validatorMessage="Invalid email format">
                        <f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />
                        <p:message for="email" />
                    </p:inputText>
                    
                    <p:outputLabel for="name" value="Full Name:" />
                    <p:inputText id="name" value="#{registerBean.name}" 
                                 required="true"
                                 validatorMessage="Name must be at least 3 characters">
                        <f:validateLength minimum="3" />
                        <p:message for="name" />
                    </p:inputText>
                    
                    <p:outputLabel for="password" value="Password:" />
                    <p:password id="password" value="#{registerBean.password}" 
                                required="true" 
                                feedback="true"
                                weakLabel="Weak" goodLabel="Good" strongLabel="Strong"
                                validatorMessage="Password must be at least 6 characters">
                        <f:validateLength minimum="6" />
                        <p:message for="password" />
                    </p:password>
                    
                    <p:outputLabel for="confirmPassword" value="Confirm Password:" />
                    <p:password id="confirmPassword" value="#{registerBean.confirmPassword}" 
                                required="true"
                                validatorMessage="Passwords do not match">
                        <f:validator validatorId="passwordValidator" />
                        <f:attribute name="password" value="#{registerBean.password}" />
                        <p:message for="confirmPassword" />
                    </p:password>
                    
                    <p:outputLabel value="" />
                    <p:selectBooleanCheckbox id="isDriver" value="#{registerBean.driver}">
                        <p:ajax update="messages" />
                    </p:selectBooleanCheckbox>
                    <p:outputLabel for="isDriver" value="I want to register as a Driver" />
                </p:panelGrid>
                
                <p:commandButton value="Create Account" 
                                 action="#{registerBean.register}" 
                                 update="messages registerForm"
                                 icon="pi pi-user-plus"
                                 styleClass="ui-button-success"
                                 style="width:100%; margin-top:20px;" />
                
                <p:divider />
                
                <p:commandButton value="Back to Login" 
                                 action="login" 
                                 icon="pi pi-arrow-left"
                                 styleClass="ui-button-secondary"
                                 style="width:100%;" 
                                 immediate="true" />
            </p:panel>
        </h:form>
    </div>
</h:body>
</html>
