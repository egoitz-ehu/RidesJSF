<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Register - RidesJSF</title>
</h:head>
<h:body>
	<div style="width: 500px; margin: 50px auto;">
		<h:form id="registerForm">
			<p:panel header="Create New Account" style="margin-bottom:20px">
				<p:panelGrid columns="2" layout="grid" styleClass="ui-fluid">
					<p:outputLabel for="email" value="Email:" />
					<h:panelGroup>
						<p:inputText id="email" value="#{registerBean.email}"
							required="true" validatorMessage="Invalid email format">
							<f:validateRegex
								pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" />
							<p:ajax event="blur" update="emailMsg" />
						</p:inputText>
						<p:message id="emailMsg" for="email" />
					</h:panelGroup>

					<p:outputLabel for="name" value="Full Name:" />
					<h:panelGroup>
						<p:inputText id="name" value="#{registerBean.name}"
							required="true"
							validatorMessage="Name must be at least 3 characters">
							<f:validateLength minimum="3" />
							<p:ajax event="blur" update="nameMsg" />
						</p:inputText>
						<p:message id="nameMsg" for="name" />
					</h:panelGroup>

					<p:outputLabel for="password" value="Password:" />
					<h:panelGroup>
						<p:password id="password" value="#{registerBean.password}"
							required="true" feedback="true" weakLabel="Weak" goodLabel="Good"
							strongLabel="Strong" redisplay="true"
							validatorMessage="Password must be at least 6 characters">
							<f:validateLength minimum="6" />
							<p:ajax event="blur" update="passwordMsg confirmPasswordMsg" />
							<p:ajax event="keyup" update="confirmPasswordMsg" />
						</p:password>
						<p:message id="passwordMsg" for="password" />
					</h:panelGroup>

					<p:outputLabel for="confirmPassword" value="Confirm Password:" />
					<h:panelGroup>
						<p:password id="confirmPassword"
							value="#{registerBean.confirmPassword}" required="true"
							redisplay="true" validatorMessage="Passwords do not match">
							<f:validator validatorId="passwordValidator" />
							<f:attribute name="password" value="#{registerBean.password}" />
							<p:ajax event="keyup" update="confirmPasswordMsg" />
							<p:ajax event="blur" update="confirmPasswordMsg" />
						</p:password>
						<p:message id="confirmPasswordMsg" for="confirmPassword" />
					</h:panelGroup>

					<p:outputLabel value="" />
					<p:selectBooleanCheckbox id="isDriver"
						value="#{registerBean.driver}">
						<p:ajax update="messages" />
					</p:selectBooleanCheckbox>
					<p:outputLabel for="isDriver"
						value="I want to register as a Driver" />
				</p:panelGrid>

				<p:commandButton value="Create Account"
					action="#{registerBean.register}" update="messages registerForm"
					icon="pi pi-user-plus" styleClass="ui-button-success"
					style="width:100%; margin-top:20px;" />

				<p:divider />

				<p:commandButton value="Back to Home" action="home"
					icon="pi pi-arrow-left" styleClass="ui-button-secondary"
					style="width:100%;" immediate="true" />
			</p:panel>
		</h:form>
	</div>
</h:body>
</html>