<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/WEB-INF/facelets/templates/Txantiloia.xhtml">

	<ui:define name="styles">
		<h:outputStylesheet library="css" name="transfers.css" />
	</ui:define>

	<ui:define name="content">
		<f:event type="postAddToView"
			listener="#{languageBean.initializeLocaleForView}" />

		<p:growl id="messages" showDetail="true" life="5000" />

		<p:panel header="#{msg['money.manageMoney']}">

			<p:panel id="currentMoney" header="#{msg['money.currentBalance']}">
				<h:outputText value="#{msg['money.currentMoney']}: " />
				<h:outputText value="#{manageMoneyBean.currentBalance}">
					<f:convertNumber type="currency" currencySymbol="€" />
				</h:outputText>
				<br />
				<h:outputText value="#{msg['money.currentFrozenMoney']}: " />
				<h:outputText value="#{manageMoneyBean.frozenMoney}">
					<f:convertNumber type="currency" currencySymbol="€" />
				</h:outputText>
			</p:panel>

			<p:spacer height="20" />

			<h:panelGrid columns="2" style="width: 100%;">
				<h:form id="addMoneyForm" style="padding-right: 10px;">
					<p:panel header="#{msg['money.depositMoney']}">
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="addAmount" value="#{msg['money.amount']}" />
							<p:inputNumber id="addAmount"
								value="#{manageMoneyBean.amountToAdd}" decimalPlaces="2"
								minValue="1.00" maxValue="9999.99" required="true"
								requiredMessage="#{msg['javax.faces.component.UIInput.REQUIRED']}" />

							<p:commandButton value="#{msg['money.depositButton']}"
								action="#{manageMoneyBean.addMoney}"
								update=":withdrawMoneyForm @form :messages :currentMoney :transferTable :statisticsPanel" />
						</h:panelGrid>
					</p:panel>
				</h:form>

				<h:form id="withdrawMoneyForm" style="padding-left: 10px;">
					<p:panel header="#{msg['money.withdrawMoney']}">
						<h:panelGrid columns="2" cellpadding="5">
							<h:outputLabel for="withdrawAmount"
								value="#{msg['money.amount']}" />
							<p:inputNumber id="withdrawAmount"
								value="#{manageMoneyBean.amountToWithdraw}" decimalPlaces="2"
								minValue="1.00" maxValue="9999.99" required="true"
								requiredMessage="#{msg['javax.faces.component.UIInput.REQUIRED']}" />

							<p:commandButton value="#{msg['money.withdrawButton']}"
								action="#{manageMoneyBean.withdrawMoney}"
								update=":addMoneyForm  @form :messages :currentMoney :transferTable :statisticsPanel" />
						</h:panelGrid>
					</p:panel>
				</h:form>
			</h:panelGrid>

			<p:spacer height="20" />
			<p:dataTable id="transferTable" var="transfer"
				value="#{manageMoneyBean.transferList}" scrollable="true"
				scrollHeight="250">
				<p:column headerText="#{msg['money.table.amount']}">
					<h:outputText value="#{transfer.amount}">
						<f:convertNumber type="currency" currencySymbol="€" />
					</h:outputText>
				</p:column>
				<p:column headerText="#{msg['money.table.type']}">
					<h:outputText value="#{msg[transfer.type]}"
						styleClass="#{transfer.type}" />
				</p:column>
			</p:dataTable>


			<p:spacer height="20" />
			<p:panel header="#{msg['money.statistics']}" id="statisticsPanel">
				<p:lineChart  model="#{manageMoneyBean.lineModel}" style="width:100%; height:400px"/>
			</p:panel>

		</p:panel>

		<p:messages showDetail="true" closable="true" />
	</ui:define>
</ui:composition>